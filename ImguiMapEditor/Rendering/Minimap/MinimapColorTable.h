#pragma once

#include <cstdint>
#include <array>

namespace MapEditor {
namespace Rendering {

/**
 * Color palette for minimap rendering.
 * Uses RME's exact 256-color table (6x6x6 color cube).
 * 
 * Color indices 0-215: RGB values using steps of 51 (0, 51, 102, 153, 204, 255)
 * Color indices 216-255: Reserved (all transparent/black)
 */
class MinimapColorTable {
public:
    /**
     * Get RGBA color (alpha always 255 for valid colors, 0 for index 0)
     */
    static constexpr uint32_t getColor(uint8_t index) {
        return kColors[index];
    }
    
    /**
     * Get RGB components from index
     */
    static constexpr void getRGB(uint8_t index, uint8_t& r, uint8_t& g, uint8_t& b) {
        uint32_t c = kColors[index];
        r = (c >> 0) & 0xFF;
        g = (c >> 8) & 0xFF;
        b = (c >> 16) & 0xFF;
    }
    
    /**
     * Check if color index represents a visible color
     */
    static constexpr bool isVisible(uint8_t index) {
        return index > 0 && index < 216;
    }

private:
    // RME color palette: 6x6x6 color cube (RGB values: 0, 51, 102, 153, 204, 255)
    // Format: 0xAABBGGRR (ABGR for OpenGL texture upload)
    static constexpr std::array<uint32_t, 256> kColors = {
        // Transparent/black for index 0
        0x00000000,
        // Indices 1-215: 6x6x6 color cube
        // R=0
        0xFF330000, 0xFF660000, 0xFF990000, 0xFFCC0000, 0xFFFF0000,
        0xFF003300, 0xFF333300, 0xFF663300, 0xFF993300, 0xFFCC3300, 0xFFFF3300,
        0xFF006600, 0xFF336600, 0xFF666600, 0xFF996600, 0xFFCC6600, 0xFFFF6600,
        0xFF009900, 0xFF339900, 0xFF669900, 0xFF999900, 0xFFCC9900, 0xFFFF9900,
        0xFF00CC00, 0xFF33CC00, 0xFF66CC00, 0xFF99CC00, 0xFFCCCC00, 0xFFFFCC00,
        0xFF00FF00, 0xFF33FF00, 0xFF66FF00, 0xFF99FF00, 0xFFCCFF00, 0xFFFFFF00,
        // R=51
        0xFF000033, 0xFF330033, 0xFF660033, 0xFF990033, 0xFFCC0033, 0xFFFF0033,
        0xFF003333, 0xFF333333, 0xFF663333, 0xFF993333, 0xFFCC3333, 0xFFFF3333,
        0xFF006633, 0xFF336633, 0xFF666633, 0xFF996633, 0xFFCC6633, 0xFFFF6633,
        0xFF009933, 0xFF339933, 0xFF669933, 0xFF999933, 0xFFCC9933, 0xFFFF9933,
        0xFF00CC33, 0xFF33CC33, 0xFF66CC33, 0xFF99CC33, 0xFFCCCC33, 0xFFFFCC33,
        0xFF00FF33, 0xFF33FF33, 0xFF66FF33, 0xFF99FF33, 0xFFCCFF33, 0xFFFFFF33,
        // R=102
        0xFF000066, 0xFF330066, 0xFF660066, 0xFF990066, 0xFFCC0066, 0xFFFF0066,
        0xFF003366, 0xFF333366, 0xFF663366, 0xFF993366, 0xFFCC3366, 0xFFFF3366,
        0xFF006666, 0xFF336666, 0xFF666666, 0xFF996666, 0xFFCC6666, 0xFFFF6666,
        0xFF009966, 0xFF339966, 0xFF669966, 0xFF999966, 0xFFCC9966, 0xFFFF9966,
        0xFF00CC66, 0xFF33CC66, 0xFF66CC66, 0xFF99CC66, 0xFFCCCC66, 0xFFFFCC66,
        0xFF00FF66, 0xFF33FF66, 0xFF66FF66, 0xFF99FF66, 0xFFCCFF66, 0xFFFFFF66,
        // R=153
        0xFF000099, 0xFF330099, 0xFF660099, 0xFF990099, 0xFFCC0099, 0xFFFF0099,
        0xFF003399, 0xFF333399, 0xFF663399, 0xFF993399, 0xFFCC3399, 0xFFFF3399,
        0xFF006699, 0xFF336699, 0xFF666699, 0xFF996699, 0xFFCC6699, 0xFFFF6699,
        0xFF009999, 0xFF339999, 0xFF669999, 0xFF999999, 0xFFCC9999, 0xFFFF9999,
        0xFF00CC99, 0xFF33CC99, 0xFF66CC99, 0xFF99CC99, 0xFFCCCC99, 0xFFFFCC99,
        0xFF00FF99, 0xFF33FF99, 0xFF66FF99, 0xFF99FF99, 0xFFCCFF99, 0xFFFFFF99,
        // R=204
        0xFF0000CC, 0xFF3300CC, 0xFF6600CC, 0xFF9900CC, 0xFFCC00CC, 0xFFFF00CC,
        0xFF0033CC, 0xFF3333CC, 0xFF6633CC, 0xFF9933CC, 0xFFCC33CC, 0xFFFF33CC,
        0xFF0066CC, 0xFF3366CC, 0xFF6666CC, 0xFF9966CC, 0xFFCC66CC, 0xFFFF66CC,
        0xFF0099CC, 0xFF3399CC, 0xFF6699CC, 0xFF9999CC, 0xFFCC99CC, 0xFFFF99CC,
        0xFF00CCCC, 0xFF33CCCC, 0xFF66CCCC, 0xFF99CCCC, 0xFFCCCCCC, 0xFFFFCCCC,
        0xFF00FFCC, 0xFF33FFCC, 0xFF66FFCC, 0xFF99FFCC, 0xFFCCFFCC, 0xFFFFFFCC,
        // R=255
        0xFF0000FF, 0xFF3300FF, 0xFF6600FF, 0xFF9900FF, 0xFFCC00FF, 0xFFFF00FF,
        0xFF0033FF, 0xFF3333FF, 0xFF6633FF, 0xFF9933FF, 0xFFCC33FF, 0xFFFF33FF,
        0xFF0066FF, 0xFF3366FF, 0xFF6666FF, 0xFF9966FF, 0xFFCC66FF, 0xFFFF66FF,
        0xFF0099FF, 0xFF3399FF, 0xFF6699FF, 0xFF9999FF, 0xFFCC99FF, 0xFFFF99FF,
        0xFF00CCFF, 0xFF33CCFF, 0xFF66CCFF, 0xFF99CCFF, 0xFFCCCCFF, 0xFFFFCCFF,
        0xFF00FFFF, 0xFF33FFFF, 0xFF66FFFF, 0xFF99FFFF, 0xFFCCFFFF, 0xFFFFFFFF,
        // Indices 216-255: Reserved (transparent)
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
        0x00000000, 0x00000000, 0x00000000, 0x00000000
    };
};

} // namespace Rendering
} // namespace MapEditor
